situation_worm_attack = {
	picture = GFX_evt_in_the_dark
	complete_icon_frame = GFX_situation_outcome_frame_red
	complete_icon = GFX_situation_outcome_negative
	fail_icon_frame = GFX_situation_outcome_frame_green
	fail_icon = GFX_situation_outcome_positive
	
	on_start = {
		#set_situation_locked = yes
	}
	
	on_progress_complete = { # Worms Win
		custom_tooltip = situation_sw22_worm_attack_worms_win_tooltip
		hidden_effect = { destroy_situation = this }	
	}

	on_fail = { # Worms Lose
		custom_tooltip = situation_sw22_worm_attack_worms_lose_tooltip
		hidden_effect = { destroy_situation = this }
	}

	start_value = 50
	progress_direction = monodirectional

	on_monthly = {
		random_events = {
			60 = 0
			20 = sw22_situation_events.1 # Worm Attack
			20 = sw22_situation_events.2 # Worm Deposit
		}
	}

	stages = {
		worm_attack_1 = {
			icon = GFX_situation_stage_1
			icon_background = GFX_situation_stage_frame_red
			end = 25
			target_modifier = {
				planet_stability_add = -10
			}
		}
		
		worm_attack_2 = {
			icon = GFX_situation_stage_2
			icon_background = GFX_situation_stage_frame_red
			end = 75
			on_first_enter = {
				situation_event = { id = sw22_situation_events.3 }
			}
			target_modifier = {
				planet_stability_add = -25
			}
		}

		worm_attack_3 = {
			icon = GFX_situation_stage_3
			icon_background = GFX_situation_stage_frame_red
			end = 100
			on_first_enter = {
				situation_event = { id = sw22_situation_events.4 }
			}
			target_modifier = {
				planet_stability_add = -50
			}
		}
	}
	
	monthly_progress = {
		base = -4
		modifier = {
			add = 2
			desc = sw22_worm_containment_do_nothing
			current_situation_approach = sw22_worm_attack_do_nothing
		}
		modifier = {
			add = 4
			desc = sw22_worm_containment_contained
			current_situation_approach = sw22_worm_attack_keep_contained 
		}
	}

	approach = {
		name = sw22_worm_attack_do_nothing
		icon = GFX_situation_approach_this_is_fine
		icon_background = GFX_situation_approach_bg_red
		on_select = {
			custom_tooltip = deficit_approach_do_nothing_tooltip
		}
		target_modifier = {
			biological_pop_happiness = -0.25
		}
	}

	approach = {
		name = sw22_worm_attack_keep_contained
		icon = GFX_situation_approach_shrug
		icon_background = GFX_situation_approach_bg_yellow
		on_select = {
			custom_tooltip = sw22_worm_attack_keep_contained_tooltip
		}
		ai_weight = {
			base = 10
		}
		resources = {
			category = situations
			upkeep = {
				energy = 25
			}
		}
		target_modifier = {
			biological_pop_happiness = -0.10
		}
	}

	approach = {
		name = sw22_worm_attack_early_bird
		icon = GFX_situation_approach_research
		icon_background = GFX_situation_approach_bg_green
		on_select = {
			custom_tooltip = sw22_worm_attack_early_bird_tooltip
		}
		ai_weight = {
			base = 100
		}
		resources = {
			category = situations
			upkeep = {
				energy = 50
			}
		}
		potential = {
			owner = {
				has_technology = sw22_tech_early_bird
			}
		}
	}
}